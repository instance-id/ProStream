import{_ as a,o as i,c as n,ag as e}from"./chunks/framework.DPLcbSfg.js";const g=JSON.parse('{"title":"Runtime Streaming Systems","description":"","frontmatter":{},"headers":[],"relativePath":"runtime-systems/runtime-streaming.md","filePath":"runtime-systems/runtime-streaming.md"}'),t={name:"runtime-systems/runtime-streaming.md"};function l(r,s,o,p,h,d){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="runtime-streaming-systems" tabindex="-1">Runtime Streaming Systems <a class="header-anchor" href="#runtime-streaming-systems" aria-label="Permalink to &quot;Runtime Streaming Systems&quot;">​</a></h1><p>ProStream&#39;s runtime streaming systems are built on Unity&#39;s DOTS (Data-Oriented Technology Stack) and use ECS (Entity Component System) for high-performance, distance-based scene streaming.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>These systems automatically load and unload SubScenes based on proximity to a loading trigger (typically the player or camera).</p><h2 id="key-runtime-components" tabindex="-1">Key Runtime Components <a class="header-anchor" href="#key-runtime-components" aria-label="Permalink to &quot;Key Runtime Components&quot;">​</a></h2><ul><li><strong>SubSceneLoadingSystem</strong> - Handles loading SubScenes and sections</li><li><strong>SubSceneUnloadingSystem</strong> - Handles unloading SubScenes and sections</li><li><strong>StreamingManager</strong> - Coordinates streaming operations</li><li><strong>ProStreamSystem</strong> - Base system infrastructure</li><li><strong>Loading Trigger</strong> - Reference position for distance calculations (GameObject)</li></ul><h2 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to &quot;Core Concepts&quot;">​</a></h2><h3 id="distance-based-streaming" tabindex="-1">Distance-Based Streaming <a class="header-anchor" href="#distance-based-streaming" aria-label="Permalink to &quot;Distance-Based Streaming&quot;">​</a></h3><p>ProStream calculates the distance between the <strong>Loading Trigger</strong> (your player/camera) and each SubScene. When the distance falls within configured thresholds, sections are loaded or unloaded.</p><p><strong>Distance Calculation Example:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Player Position: (0, 0, 0)</span></span>
<span class="line"><span>SubScene Position: (100, 0, 50)</span></span>
<span class="line"><span>Distance: ~111 units</span></span>
<span class="line"><span></span></span>
<span class="line"><span>If Section &quot;LargeObjects&quot; loads at 150m:</span></span>
<span class="line"><span>→ Section IS loaded (111m &lt; 150m)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>If Section &quot;SmallObjects&quot; loads at 50m:</span></span>
<span class="line"><span>→ Section NOT loaded (111m &gt; 50m)</span></span></code></pre></div><h3 id="section-based-loading" tabindex="-1">Section-Based Loading <a class="header-anchor" href="#section-based-loading" aria-label="Permalink to &quot;Section-Based Loading&quot;">​</a></h3><p>Each SubScene contains multiple <strong>sections</strong> (Ground, LargeObjects, SmallObjects, etc.). Sections can load/unload independently based on their configured distances.</p><p><strong>Benefits:</strong></p><ul><li>Fine-grained control over what loads when</li><li>Reduced memory usage (only load what&#39;s visible)</li><li>Improved performance (fewer objects to process)</li><li>Seamless streaming (no loading screens)</li></ul><h2 id="subsceneloadingsystem" tabindex="-1">SubSceneLoadingSystem <a class="header-anchor" href="#subsceneloadingsystem" aria-label="Permalink to &quot;SubSceneLoadingSystem&quot;">​</a></h2><p><strong>Location:</strong> <code>Runtime/Scripts/Streaming/SubSceneLoadingSystem.cs</code></p><h3 id="purpose" tabindex="-1">Purpose <a class="header-anchor" href="#purpose" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>Manages the loading of SubScenes and their sections based on distance from the loading trigger.</p><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Every Frame (Update):</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. Calculate distance to each SubScene</span></span>
<span class="line"><span>2. Determine which sections should be loaded</span></span>
<span class="line"><span>3. Queue loading requests for new sections</span></span>
<span class="line"><span>4. Execute loading jobs asynchronously</span></span>
<span class="line"><span>5. Update loaded section tracking</span></span></code></pre></div><h3 id="state-machine" tabindex="-1">State Machine <a class="header-anchor" href="#state-machine" aria-label="Permalink to &quot;State Machine&quot;">​</a></h3><p>The loading system maintains internal states for each SubScene:</p><ul><li><strong>Unloaded</strong> - SubScene not in memory</li><li><strong>Loading</strong> - SubScene being loaded</li><li><strong>Loaded</strong> - SubScene fully loaded and active</li><li><strong>Streaming</strong> - Sections loading/unloading dynamically</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Unloaded → Loading → Loaded → Streaming</span></span>
<span class="line"><span>    ↓                              ↓</span></span>
<span class="line"><span>    ←──────────────────────────────</span></span>
<span class="line"><span>         (Distance exceeds threshold)</span></span></code></pre></div><h3 id="ecs-queries" tabindex="-1">ECS Queries <a class="header-anchor" href="#ecs-queries" aria-label="Permalink to &quot;ECS Queries&quot;">​</a></h3><p>The system uses ECS queries to efficiently process SubScenes:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query for SubScenes that need loading</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EntityQuery</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadingQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetEntityQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ComponentType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SubSceneData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ComponentType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WorldTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ComponentType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LoadedSection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query for SubScenes with sections to load</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EntityQuery</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sectionQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetEntityQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ComponentType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SceneSection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ComponentType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SectionDistance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="jobs-for-performance" tabindex="-1">Jobs for Performance <a class="header-anchor" href="#jobs-for-performance" aria-label="Permalink to &quot;Jobs for Performance&quot;">​</a></h3><p>Loading operations run as parallel jobs using Unity&#39;s Job System with Burst compilation:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BurstCompile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DistanceCalculationJob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IJobParallelFor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> float3</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadingTriggerPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">float3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subScenePositions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NativeArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">distances</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        distances[index] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            loadingTriggerPosition, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            subScenePositions[index]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="subsceneunloadingsystem" tabindex="-1">SubSceneUnloadingSystem <a class="header-anchor" href="#subsceneunloadingsystem" aria-label="Permalink to &quot;SubSceneUnloadingSystem&quot;">​</a></h2><p><strong>Location:</strong> <code>Runtime/Scripts/Streaming/SubSceneUnloadingSystem.cs</code></p><h3 id="purpose-1" tabindex="-1">Purpose <a class="header-anchor" href="#purpose-1" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>Manages the unloading of SubScenes and sections when they exceed distance thresholds or when triggered manually.</p><h3 id="how-it-works-1" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works-1" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Every Frame (Update):</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. Check loaded sections against distance thresholds</span></span>
<span class="line"><span>2. Identify sections to unload</span></span>
<span class="line"><span>3. Queue unloading requests</span></span>
<span class="line"><span>4. Execute unloading jobs</span></span>
<span class="line"><span>5. Release resources</span></span>
<span class="line"><span>6. Update tracking data</span></span></code></pre></div><h3 id="unloading-strategy-hysteresis" tabindex="-1">Unloading Strategy - Hysteresis <a class="header-anchor" href="#unloading-strategy-hysteresis" aria-label="Permalink to &quot;Unloading Strategy - Hysteresis&quot;">​</a></h3><p>ProStream uses slightly different thresholds for loading vs unloading to prevent &quot;flickering&quot; (rapid load/unload cycles).</p><p><strong>Example:</strong></p><ul><li><strong>Load at:</strong> 150m</li><li><strong>Unload at:</strong> 160m (10m hysteresis buffer)</li></ul><p>This prevents objects from loading/unloading repeatedly when the player hovers around the threshold.</p><p><strong>Configuration:</strong></p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConfigureHysteresis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">float</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    StreamingManager.Instance.HysteresisBuffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buffer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="memory-management" tabindex="-1">Memory Management <a class="header-anchor" href="#memory-management" aria-label="Permalink to &quot;Memory Management&quot;">​</a></h3><p>The unloading system ensures proper cleanup:</p><ul><li>Destroys entity data</li><li>Releases scene references</li><li>Clears cached data</li><li>Triggers garbage collection hints (when appropriate)</li></ul><h2 id="streamingmanager" tabindex="-1">StreamingManager <a class="header-anchor" href="#streamingmanager" aria-label="Permalink to &quot;StreamingManager&quot;">​</a></h2><p><strong>Location:</strong> <code>Runtime/Scripts/MonoBehaviour/StreamingManager.cs</code></p><h3 id="purpose-2" tabindex="-1">Purpose <a class="header-anchor" href="#purpose-2" aria-label="Permalink to &quot;Purpose&quot;">​</a></h3><p>High-level coordinator for all streaming operations. Acts as the bridge between MonoBehaviour world and ECS systems.</p><h3 id="key-responsibilities" tabindex="-1">Key Responsibilities <a class="header-anchor" href="#key-responsibilities" aria-label="Permalink to &quot;Key Responsibilities&quot;">​</a></h3><p><strong>Loading Trigger Management</strong></p><ul><li>Tracks the reference position (player/camera)</li><li>Updates trigger position every frame</li><li>Provides position to ECS systems</li></ul><p><strong>System Coordination</strong></p><ul><li>Enables/disables streaming systems</li><li>Controls streaming behavior</li><li>Handles streaming state</li></ul><p><strong>Configuration Management</strong></p><ul><li>Applies streaming settings</li><li>Manages distance thresholds</li><li>Handles persistent sections</li></ul><p><strong>Debug Visualization</strong></p><ul><li>Displays streaming boundaries (gizmos)</li><li>Shows loaded/unloaded sections</li><li>Provides runtime feedback</li></ul><h3 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h3><p>StreamingManager is <strong>automatically created</strong> after SubScene creation. You can also add it manually.</p><p><strong>Manual Setup:</strong></p><ol><li>Create empty GameObject in scene</li><li>Add <code>StreamingManager</code> component</li><li>Assign Loading Trigger (player/camera)</li><li>Configure settings in Inspector</li></ol><h3 id="inspector-settings" tabindex="-1">Inspector Settings <a class="header-anchor" href="#inspector-settings" aria-label="Permalink to &quot;Inspector Settings&quot;">​</a></h3><p><strong>Loading Trigger</strong></p><ul><li>Reference to player/camera Transform</li><li>Used for distance calculations</li><li>Auto-finds Camera.main if not set</li></ul><p><strong>Streaming Settings</strong></p><ul><li>Enable/disable streaming</li><li>Hysteresis buffer distance</li><li>Update frequency</li><li>Debug visualization options</li></ul><p><strong>Section Configuration</strong></p><ul><li>Override section distances</li><li>Enable/disable specific sections</li><li>Persistent section settings</li></ul><h2 id="runtime-behavior" tabindex="-1">Runtime Behavior <a class="header-anchor" href="#runtime-behavior" aria-label="Permalink to &quot;Runtime Behavior&quot;">​</a></h2><h3 id="initialization" tabindex="-1">Initialization <a class="header-anchor" href="#initialization" aria-label="Permalink to &quot;Initialization&quot;">​</a></h3><p>When Play Mode starts:</p><ol><li>StreamingManager initializes</li><li>ECS systems are created</li><li>SubScene data is loaded</li><li>Initial sections are loaded (if within range)</li><li>Streaming begins</li></ol><h3 id="during-play" tabindex="-1">During Play <a class="header-anchor" href="#during-play" aria-label="Permalink to &quot;During Play&quot;">​</a></h3><p>Every frame:</p><ol><li>StreamingManager updates Loading Trigger position</li><li>SubSceneLoadingSystem calculates distances</li><li>Sections within threshold are queued for loading</li><li>SubSceneUnloadingSystem checks loaded sections</li><li>Sections beyond threshold are queued for unloading</li><li>Jobs execute asynchronously</li><li>Scene updates reflect changes</li></ol><h3 id="hierarchy-during-play-mode" tabindex="-1">Hierarchy During Play Mode <a class="header-anchor" href="#hierarchy-during-play-mode" aria-label="Permalink to &quot;Hierarchy During Play Mode&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>YourScene (Main)</span></span>
<span class="line"><span>├── SceneConnector</span></span>
<span class="line"><span>├── StreamingManager</span></span>
<span class="line"><span>├── SubSceneRoot</span></span>
<span class="line"><span>│   ├── YourScene_Quad_0_0 (SubScene - Loaded)</span></span>
<span class="line"><span>│   │   ├── Section_Ground (Loaded)</span></span>
<span class="line"><span>│   │   ├── Section_LargeObjects (Loaded)</span></span>
<span class="line"><span>│   │   └── Section_SmallObjects (Not Loaded)</span></span>
<span class="line"><span>│   ├── YourScene_Quad_0_1 (SubScene - Not Loaded)</span></span>
<span class="line"><span>│   └── ...</span></span>
<span class="line"><span>└── Camera</span></span></code></pre></div><h2 id="performance-optimization" tabindex="-1">Performance Optimization <a class="header-anchor" href="#performance-optimization" aria-label="Permalink to &quot;Performance Optimization&quot;">​</a></h2><h3 id="distance-calculation" tabindex="-1">Distance Calculation <a class="header-anchor" href="#distance-calculation" aria-label="Permalink to &quot;Distance Calculation&quot;">​</a></h3><ul><li>Uses Burst-compiled jobs for parallel processing</li><li>Calculates squared distance (avoids sqrt when possible)</li><li>Batches calculations per frame</li></ul><h3 id="loading-unloading" tabindex="-1">Loading/Unloading <a class="header-anchor" href="#loading-unloading" aria-label="Permalink to &quot;Loading/Unloading&quot;">​</a></h3><ul><li>Asynchronous operations don&#39;t block main thread</li><li>Spreads loading across multiple frames</li><li>Prioritizes closest sections first</li></ul><h3 id="memory-management-1" tabindex="-1">Memory Management <a class="header-anchor" href="#memory-management-1" aria-label="Permalink to &quot;Memory Management&quot;">​</a></h3><ul><li>Only loaded sections consume memory</li><li>Unloaded sections are fully released</li><li>Hysteresis prevents memory thrashing</li></ul><h2 id="debugging-runtime-streaming" tabindex="-1">Debugging Runtime Streaming <a class="header-anchor" href="#debugging-runtime-streaming" aria-label="Permalink to &quot;Debugging Runtime Streaming&quot;">​</a></h2><h3 id="console-logging" tabindex="-1">Console Logging <a class="header-anchor" href="#console-logging" aria-label="Permalink to &quot;Console Logging&quot;">​</a></h3><p>Enable streaming debug logs in StreamingManager:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Streaming] Loading section: MyScene_Quad_0_0.Section_Ground (distance: 45m)</span></span>
<span class="line"><span>[Streaming] Unloading section: MyScene_Quad_2_2.Section_SmallObjects (distance: 165m)</span></span></code></pre></div><h3 id="gizmos-visualization" tabindex="-1">Gizmos Visualization <a class="header-anchor" href="#gizmos-visualization" aria-label="Permalink to &quot;Gizmos Visualization&quot;">​</a></h3><p>Enable gizmos in Scene view during Play Mode:</p><ul><li>Green spheres = Loaded sections</li><li>Red spheres = Unloaded sections</li><li>Yellow lines = Loading trigger radius</li></ul><h3 id="profiler" tabindex="-1">Profiler <a class="header-anchor" href="#profiler" aria-label="Permalink to &quot;Profiler&quot;">​</a></h3><p>Monitor streaming performance:</p><ul><li><strong>CPU Usage</strong> - Check system overhead</li><li><strong>Memory</strong> - Watch for memory leaks</li><li><strong>Loading Time</strong> - Measure section load times</li></ul><h2 id="common-runtime-issues" tabindex="-1">Common Runtime Issues <a class="header-anchor" href="#common-runtime-issues" aria-label="Permalink to &quot;Common Runtime Issues&quot;">​</a></h2><p><strong>Sections not loading</strong></p><ul><li>Check Loading Trigger is assigned</li><li>Verify distances are configured correctly</li><li>Ensure StreamingManager is enabled</li><li>Check Console for errors</li></ul><p><strong>Sections loading too late</strong></p><ul><li>Increase section load distances</li><li>Reduce hysteresis buffer</li><li>Check for performance bottlenecks</li></ul><p><strong>Memory usage too high</strong></p><ul><li>Reduce section load distances</li><li>Split large sections into smaller ones</li><li>Unload unused sections manually</li></ul><p><strong>Flickering (rapid load/unload)</strong></p><ul><li>Increase hysteresis buffer</li><li>Adjust distance thresholds</li><li>Check Loading Trigger movement speed</li></ul><h2 id="advanced-configuration" tabindex="-1">Advanced Configuration <a class="header-anchor" href="#advanced-configuration" aria-label="Permalink to &quot;Advanced Configuration&quot;">​</a></h2><h3 id="custom-loading-trigger" tabindex="-1">Custom Loading Trigger <a class="header-anchor" href="#custom-loading-trigger" aria-label="Permalink to &quot;Custom Loading Trigger&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomLoadingTrigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MonoBehaviour</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Update StreamingManager with custom position</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        StreamingManager.Instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SetLoadingTriggerPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform.position);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="manual-section-control" tabindex="-1">Manual Section Control <a class="header-anchor" href="#manual-section-control" aria-label="Permalink to &quot;Manual Section Control&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Manually load a specific section</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingManager.Instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LoadSection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyScene_Quad_0_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ground&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Manually unload a specific section</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingManager.Instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UnloadSection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyScene_Quad_2_2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SmallObjects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="event-callbacks" tabindex="-1">Event Callbacks <a class="header-anchor" href="#event-callbacks" aria-label="Permalink to &quot;Event Callbacks&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Subscribe to streaming events</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingManager.Instance.OnSectionLoaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HandleSectionLoaded;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StreamingManager.Instance.OnSectionUnloaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HandleSectionUnloaded;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HandleSectionLoaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> subSceneName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sectionName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Debug.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$&quot;Loaded: {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subSceneName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}.{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sectionName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/core-concepts/streaming-layers.html">Streaming Layers</a> - Configure layer distances</li><li><a href="/processes/process-subscenes.html">SubScene Creation</a> - How SubScenes are created</li><li><a href="/getting-started/standard-workflow.html">Standard Workflow</a> - Complete setup guide</li><li><a href="/troubleshooting/troubleshooting.html">Troubleshooting</a> - Common issues and solutions</li></ul>`,115)])])}const k=a(t,[["render",l]]);export{g as __pageData,k as default};
