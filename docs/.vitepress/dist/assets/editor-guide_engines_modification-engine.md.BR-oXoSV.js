import{_ as s,o as a,c as e,ag as n}from"./chunks/framework.DPLcbSfg.js";const c=JSON.parse('{"title":"Modification Engine","description":"","frontmatter":{},"headers":[],"relativePath":"editor-guide/engines/modification-engine.md","filePath":"editor-guide/engines/modification-engine.md"}'),t={name:"editor-guide/engines/modification-engine.md"};function l(h,i,p,r,o,k){return a(),e("div",null,[...i[0]||(i[0]=[n(`<h1 id="modification-engine" tabindex="-1">Modification Engine <a class="header-anchor" href="#modification-engine" aria-label="Permalink to &quot;Modification Engine&quot;">​</a></h1><p>The <strong>Modification Engine</strong> is a powerful extensibility system that allows you to hook into various stages of ProStream&#39;s workflow and perform custom processing on GameObjects, sections, or entire SubScenes.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Think of modifications as <strong>middleware</strong> or <strong>plugins</strong> that extend ProStream&#39;s functionality without modifying core code. Modifications can run before, during, or after major processes like position calculation and SubScene creation.</p><h2 id="key-concepts" tabindex="-1">Key Concepts <a class="header-anchor" href="#key-concepts" aria-label="Permalink to &quot;Key Concepts&quot;">​</a></h2><h3 id="what-is-a-modification" tabindex="-1">What is a Modification? <a class="header-anchor" href="#what-is-a-modification" aria-label="Permalink to &quot;What is a Modification?&quot;">​</a></h3><p>A modification is a <code>ScriptableObject</code> that inherits from <code>ModificationEngine</code> and implements custom logic to transform or enhance GameObjects during the ProStream workflow.</p><h3 id="when-to-use-modifications" tabindex="-1">When to Use Modifications <a class="header-anchor" href="#when-to-use-modifications" aria-label="Permalink to &quot;When to Use Modifications&quot;">​</a></h3><p><strong>Common Use Cases:</strong></p><ul><li><strong>Mesh Combining</strong> - Merge multiple meshes per section for performance</li><li><strong>LOD Generation</strong> - Create LOD groups automatically</li><li><strong>Component Removal</strong> - Strip unnecessary components (e.g., colliders in visual-only sections)</li><li><strong>Material Optimization</strong> - Batch materials, reduce draw calls</li><li><strong>Physics Baking</strong> - Pre-compute physics data</li><li><strong>Custom Data Setup</strong> - Add/configure custom components</li><li><strong>Validation</strong> - Check for issues before finalizing SubScenes</li></ul><h2 id="execution-placements" tabindex="-1">Execution Placements <a class="header-anchor" href="#execution-placements" aria-label="Permalink to &quot;Execution Placements&quot;">​</a></h2><p>Modifications can execute at multiple points in the workflow:</p><h3 id="position-calculation-stage" tabindex="-1">Position Calculation Stage <a class="header-anchor" href="#position-calculation-stage" aria-label="Permalink to &quot;Position Calculation Stage&quot;">​</a></h3><ul><li><strong>BeforePositionCalculation</strong> - Before rule matching begins</li><li><strong>AfterPositionCalculation</strong> - After rules applied, before SubScene creation</li></ul><h3 id="subscene-creation-stage" tabindex="-1">SubScene Creation Stage <a class="header-anchor" href="#subscene-creation-stage" aria-label="Permalink to &quot;SubScene Creation Stage&quot;">​</a></h3><ul><li><strong>BeforeSubSceneCreation</strong> - Before SubScene assets are created</li><li><strong>BeforeObjectCopy</strong> - Before cloning objects from main scene</li><li><strong>PerSection</strong> - After objects copied to each section (most common)</li><li><strong>BeforeMoveToSubScene</strong> - Before sections moved to SubScene files</li><li><strong>AfterMoveToSubScene</strong> - After sections in SubScene files</li><li><strong>BeforeCloseSubScenes</strong> - Before SubScene files are closed</li><li><strong>AfterCloseSubScenes</strong> - After all SubScenes closed</li></ul><h3 id="process-management" tabindex="-1">Process Management <a class="header-anchor" href="#process-management" aria-label="Permalink to &quot;Process Management&quot;">​</a></h3><ul><li><strong>UponProcessStarting</strong> - When any major process starts</li><li><strong>UponProcessCompletion</strong> - When any major process completes</li></ul><h3 id="scene-reset" tabindex="-1">Scene Reset <a class="header-anchor" href="#scene-reset" aria-label="Permalink to &quot;Scene Reset&quot;">​</a></h3><ul><li><strong>BeforeSceneReset</strong> - Before resetting scene state</li><li><strong>AfterSceneReset</strong> - After scene reset complete</li></ul><h3 id="build-pipeline" tabindex="-1">Build Pipeline <a class="header-anchor" href="#build-pipeline" aria-label="Permalink to &quot;Build Pipeline&quot;">​</a></h3><ul><li><strong>BeforeBuildStarted</strong> - Before Unity build begins</li><li><strong>AfterBuildComplete</strong> - After Unity build finishes</li></ul><h3 id="manual-execution" tabindex="-1">Manual Execution <a class="header-anchor" href="#manual-execution" aria-label="Permalink to &quot;Manual Execution&quot;">​</a></h3><ul><li><strong>Manual</strong> - Only runs when explicitly triggered</li><li><strong>Disabled</strong> - Modification is inactive</li></ul><h2 id="built-in-modifications" tabindex="-1">Built-in Modifications <a class="header-anchor" href="#built-in-modifications" aria-label="Permalink to &quot;Built-in Modifications&quot;">​</a></h2><h3 id="combinemeshmodification" tabindex="-1">CombineMeshModification <a class="header-anchor" href="#combinemeshmodification" aria-label="Permalink to &quot;CombineMeshModification&quot;">​</a></h3><p><strong>Purpose:</strong> Combines multiple meshes into single mesh for performance</p><p><strong>Execution:</strong> PerSection</p><p><strong>Benefits:</strong></p><ul><li>Reduces draw calls significantly</li><li>Improves rendering performance</li><li>Useful for static objects (ground, rocks, etc.)</li></ul><p><strong>Configuration:</strong></p><ul><li>Target layer/section</li><li>Material handling (combine or preserve)</li><li>Mesh simplification options</li></ul><h3 id="disablemeshcollidermodification" tabindex="-1">DisableMeshColliderModification <a class="header-anchor" href="#disablemeshcollidermodification" aria-label="Permalink to &quot;DisableMeshColliderModification&quot;">​</a></h3><p><strong>Purpose:</strong> Removes MeshCollider components from GameObjects</p><p><strong>Execution:</strong> PerSection or AfterMoveToSubScene</p><p><strong>Use Case:</strong></p><ul><li>Remove colliders from visual-only sections</li><li>Reduce physics overhead</li><li>Keep colliders in dedicated collision layers only</li></ul><h3 id="removematchcomponent" tabindex="-1">RemoveMatchComponent <a class="header-anchor" href="#removematchcomponent" aria-label="Permalink to &quot;RemoveMatchComponent&quot;">​</a></h3><p><strong>Purpose:</strong> Removes MatchTracker and related components after processing</p><p><strong>Execution:</strong> AfterCloseSubScenes</p><p><strong>Use Case:</strong></p><ul><li>Clean up temporary components</li><li>Reduce runtime memory usage</li><li>Remove editor-only data</li></ul><h2 id="creating-custom-modifications" tabindex="-1">Creating Custom Modifications <a class="header-anchor" href="#creating-custom-modifications" aria-label="Permalink to &quot;Creating Custom Modifications&quot;">​</a></h2><h3 id="step-1-create-scriptableobject" tabindex="-1">Step 1: Create ScriptableObject <a class="header-anchor" href="#step-1-create-scriptableobject" aria-label="Permalink to &quot;Step 1: Create ScriptableObject&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UnityEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CreateAssetMenu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fileName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MyCustomModification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 menuName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ProStream/Modifications/My Custom Modification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModificationEngine</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SerializeField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> float</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multiplier</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.5f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SerializeField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Color</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> targetColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Color.white;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My Custom Modification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecutionPlacement</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecutionPlacement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ExecutionPlacement.PerSection;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="step-2-implement-modification-logic" tabindex="-1">Step 2: Implement Modification Logic <a class="header-anchor" href="#step-2-implement-modification-logic" aria-label="Permalink to &quot;Step 2: Implement Modification Logic&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify individual GameObjects</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplyModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Example: Scale objects</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    gObject.transform.localScale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> multiplier;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Example: Change material color</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> renderer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Renderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (renderer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> renderer.material)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        renderer.material.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> targetColor;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gObject;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Run once per section before processing objects</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrepareModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sectionParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Example: Add section-level component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sectionData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sectionParent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MyCustomSectionData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sectionData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Preparing section: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sectionParent.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="step-3-create-asset-instance" tabindex="-1">Step 3: Create Asset Instance <a class="header-anchor" href="#step-3-create-asset-instance" aria-label="Permalink to &quot;Step 3: Create Asset Instance&quot;">​</a></h3><ol><li>Right-click in Project window</li><li>Select <strong>Create → ProStream → Modifications → My Custom Modification</strong></li><li>Name the asset (e.g., <code>ScaleObjects_Mod</code>)</li><li>Configure settings in Inspector</li></ol><h3 id="step-4-enable-in-prostream-editor" tabindex="-1">Step 4: Enable in ProStream Editor <a class="header-anchor" href="#step-4-enable-in-prostream-editor" aria-label="Permalink to &quot;Step 4: Enable in ProStream Editor&quot;">​</a></h3><ol><li>Open ProStream Editor</li><li>Navigate to <strong>Modifications</strong> section</li><li>Click <strong>Add Modification</strong></li><li>Select your modification asset</li><li>Enable it (checkbox)</li><li>Configure execution placement and order</li></ol><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to &quot;Performance&quot;">​</a></h3><ul><li>Keep modifications lightweight</li><li>Use batch processing when possible</li><li>Cache component references</li><li>Avoid expensive operations in tight loops</li><li>Profile modifications with Unity Profiler</li></ul><h3 id="design" tabindex="-1">Design <a class="header-anchor" href="#design" aria-label="Permalink to &quot;Design&quot;">​</a></h3><ul><li>Make modifications configurable via Inspector</li><li>Provide clear Title and description</li><li>Use appropriate ExecutionPlacement</li><li>Handle edge cases (null checks, missing components)</li><li>Log important operations for debugging</li></ul><h3 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h3><ul><li>Test with small scenes first</li><li>Verify modifications work at all execution placements</li><li>Check results in SubScene files after creation</li><li>Test in Play Mode and builds</li><li>Validate with various scene types</li></ul><h2 id="common-use-cases" tabindex="-1">Common Use Cases <a class="header-anchor" href="#common-use-cases" aria-label="Permalink to &quot;Common Use Cases&quot;">​</a></h2><h3 id="mesh-combining-example" tabindex="-1">Mesh Combining Example <a class="header-anchor" href="#mesh-combining-example" aria-label="Permalink to &quot;Mesh Combining Example&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrepareModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sectionParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> meshFilters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sectionParent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetComponentsInChildren</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> combine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CombineInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[meshFilters.Length];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meshFilters.Length; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        combine[i].mesh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meshFilters[i].sharedMesh;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        combine[i].transform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meshFilters[i].transform.localToWorldMatrix;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> combinedMesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    combinedMesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CombineMeshes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(combine);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Apply combined mesh</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> meshFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sectionParent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MeshFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    meshFilter.mesh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> combinedMesh;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="component-cleanup-example" tabindex="-1">Component Cleanup Example <a class="header-anchor" href="#component-cleanup-example" aria-label="Permalink to &quot;Component Cleanup Example&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplyModification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GameObject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Remove unnecessary components</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (gObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TryGetComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Collider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">out</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> collider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        DestroyImmediate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(collider);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (gObject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TryGetComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Rigidbody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">out</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        DestroyImmediate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rb);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gObject;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/editor-guide/engines/operation-engine.html">Operation Engine</a> - Major process execution</li><li><a href="/processes/process-subscenes.html">SubScene Creation</a> - When modifications run</li><li><a href="/getting-started/standard-workflow.html">Standard Workflow</a> - Complete setup guide</li></ul>`,65)])])}const g=s(t,[["render",l]]);export{c as __pageData,g as default};
