import{_ as n,o as a,c as s,ag as i}from"./chunks/framework.DPLcbSfg.js";const h=JSON.parse('{"title":"SubScene Creation Process","description":"","frontmatter":{},"headers":[],"relativePath":"processes/process-subscenes.md","filePath":"processes/process-subscenes.md"}'),o={name:"processes/process-subscenes.md"};function t(l,e,c,r,p,u){return a(),s("div",null,[...e[0]||(e[0]=[i(`<h1 id="subscene-creation-process" tabindex="-1">SubScene Creation Process <a class="header-anchor" href="#subscene-creation-process" aria-label="Permalink to &quot;SubScene Creation Process&quot;">​</a></h1><p>The SubScene Creation process is the final major step in the ProStream workflow. After calculating object positions and matching rules, this process creates physical Unity scene files (.unity) for each spatial division, organizes objects into streaming sections, and prepares the scene for distance-based runtime streaming.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This is an <strong>automated process</strong> that handles asset creation, object cloning, hierarchy organization, and scene management.</p><h2 id="when-to-use" tabindex="-1">When to Use <a class="header-anchor" href="#when-to-use" aria-label="Permalink to &quot;When to Use&quot;">​</a></h2><p><strong>Prerequisites:</strong></p><ul><li>Scene setup is complete</li><li>Search filters are configured</li><li>Match rules are enabled</li><li><strong>Position Calculation has been run successfully</strong></li></ul><p><strong>Trigger:</strong> Click the <strong>&quot;Create SubScenes&quot;</strong> button in the ProStream Editor after positions are calculated.</p><h2 id="what-it-does" tabindex="-1">What It Does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What It Does&quot;">​</a></h2><h3 id="_1-subscene-asset-creation" tabindex="-1">1. SubScene Asset Creation <a class="header-anchor" href="#_1-subscene-asset-creation" aria-label="Permalink to &quot;1. SubScene Asset Creation&quot;">​</a></h3><ul><li>Creates a <code>.unity</code> scene file for each QuadTree cell</li><li>Organizes assets in <code>Assets/SubScene_Assets/{SceneName}/Entity/</code></li><li>Registers files with Unity&#39;s AssetDatabase</li><li>Links SubScene components to scene assets</li></ul><h3 id="_2-section-hierarchy-creation" tabindex="-1">2. Section Hierarchy Creation <a class="header-anchor" href="#_2-section-hierarchy-creation" aria-label="Permalink to &quot;2. Section Hierarchy Creation&quot;">​</a></h3><ul><li>Creates section GameObjects within each SubScene (e.g., &quot;Section_Ground&quot;, &quot;Section_LargeObjects&quot;)</li><li>Adds <code>SubSceneSection</code> component (ProStream)</li><li>Adds <code>SceneSectionAuthoring</code> component (Unity Entities)</li><li>Configures section indices for distance-based streaming</li></ul><h3 id="_3-object-cloning-organization" tabindex="-1">3. Object Cloning &amp; Organization <a class="header-anchor" href="#_3-object-cloning-organization" aria-label="Permalink to &quot;3. Object Cloning &amp; Organization&quot;">​</a></h3><ul><li>Clones matched GameObjects from main scene</li><li>Parents clones to appropriate section hierarchies</li><li>Preserves hierarchy relationships</li><li>Removes &quot;(Clone)&quot; suffix from names</li></ul><h3 id="_4-modification-execution" tabindex="-1">4. Modification Execution <a class="header-anchor" href="#_4-modification-execution" aria-label="Permalink to &quot;4. Modification Execution&quot;">​</a></h3><ul><li>Runs enabled modifications at various stages</li><li>Examples: mesh combining, LOD setup, material optimization</li><li>Configurable execution timing (before copy, per section, after move, etc.)</li></ul><h3 id="_5-scene-reload-cleanup" tabindex="-1">5. Scene Reload &amp; Cleanup <a class="header-anchor" href="#_5-scene-reload-cleanup" aria-label="Permalink to &quot;5. Scene Reload &amp; Cleanup&quot;">​</a></h3><ul><li>Reloads main scene to finalize changes</li><li>Creates StreamingManager for runtime control</li><li>Prepares scene for play mode testing</li></ul><h2 id="process-flow" tabindex="-1">Process Flow <a class="header-anchor" href="#process-flow" aria-label="Permalink to &quot;Process Flow&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User Clicks &quot;Create SubScenes&quot; Button</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>PreCheck Validation</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Create SubScene Assets (Batch)</span></span>
<span class="line"><span>    ├── For Each QuadTree Cell:</span></span>
<span class="line"><span>    │   ├── Generate SubScene Name</span></span>
<span class="line"><span>    │   ├── Create SubScene GameObject</span></span>
<span class="line"><span>    │   ├── Create Directory Structure</span></span>
<span class="line"><span>    │   ├── Create Scene File (.unity)</span></span>
<span class="line"><span>    │   └── Register with AssetDatabase</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Open All SubScenes (Additive)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Process Each SubScene</span></span>
<span class="line"><span>    ├── Create Section Hierarchies</span></span>
<span class="line"><span>    │   ├── Section_Ground (index 0)</span></span>
<span class="line"><span>    │   ├── Section_LargeObjects (index 1)</span></span>
<span class="line"><span>    │   └── Section_SmallObjects (index 2)</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ├── Clone Objects to Sections</span></span>
<span class="line"><span>    │   ├── Get objects for this QuadTree cell</span></span>
<span class="line"><span>    │   ├── Check MatchTracker.SectionId</span></span>
<span class="line"><span>    │   ├── Clone to correct section parent</span></span>
<span class="line"><span>    │   └── Store cloned references</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ├── Run Modifications</span></span>
<span class="line"><span>    │   ├── BeforeObjectCopy</span></span>
<span class="line"><span>    │   ├── PerSection</span></span>
<span class="line"><span>    │   ├── BeforeMoveToSubScene</span></span>
<span class="line"><span>    │   └── AfterMoveToSubScene</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    └── Move Section Hierarchies to SubScene</span></span>
<span class="line"><span>        └── SceneManager.MoveGameObjectToScene()</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Close All SubScenes</span></span>
<span class="line"><span>Save Main Scene</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Reload Main Scene</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Create StreamingManager</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Complete - Ready for Play Mode</span></span></code></pre></div><h2 id="subscene-hierarchy-structure" tabindex="-1">SubScene Hierarchy Structure <a class="header-anchor" href="#subscene-hierarchy-structure" aria-label="Permalink to &quot;SubScene Hierarchy Structure&quot;">​</a></h2><p><strong>Main Scene After Creation:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>MyScene.unity</span></span>
<span class="line"><span>├── SceneConnector</span></span>
<span class="line"><span>├── SubSceneRoot</span></span>
<span class="line"><span>│   ├── MyScene_Quad_0_0 (SubScene GameObject)</span></span>
<span class="line"><span>│   ├── MyScene_Quad_0_1 (SubScene GameObject)</span></span>
<span class="line"><span>│   ├── MyScene_Quad_1_0 (SubScene GameObject)</span></span>
<span class="line"><span>│   └── ... (more SubScenes)</span></span>
<span class="line"><span>└── [Original GameObjects remain temporarily]</span></span></code></pre></div><p><strong>Individual SubScene File (MyScene_Quad_0_0.unity):</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>MyScene_Quad_0_0.unity</span></span>
<span class="line"><span>├── Section_Ground (SectionIndex = 0)</span></span>
<span class="line"><span>│   ├── Rock_001 (cloned from main scene)</span></span>
<span class="line"><span>│   ├── Rock_002 (cloned from main scene)</span></span>
<span class="line"><span>│   ├── Terrain_Chunk (cloned from main scene)</span></span>
<span class="line"><span>│   └── ... (more ground objects)</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── Section_LargeObjects (SectionIndex = 1)</span></span>
<span class="line"><span>│   ├── Building_001 (cloned from main scene)</span></span>
<span class="line"><span>│   ├── Tree_Large_001 (cloned from main scene)</span></span>
<span class="line"><span>│   └── ... (more large objects)</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>└── Section_SmallObjects (SectionIndex = 2)</span></span>
<span class="line"><span>    ├── Prop_001 (cloned from main scene)</span></span>
<span class="line"><span>    ├── Grass_Patch_001 (cloned from main scene)</span></span>
<span class="line"><span>    └── ... (more small objects)</span></span></code></pre></div><h2 id="key-components" tabindex="-1">Key Components <a class="header-anchor" href="#key-components" aria-label="Permalink to &quot;Key Components&quot;">​</a></h2><h3 id="subscene-gameobject" tabindex="-1">SubScene GameObject <a class="header-anchor" href="#subscene-gameobject" aria-label="Permalink to &quot;SubScene GameObject&quot;">​</a></h3><p><strong>Components:</strong></p><ul><li><code>SubScene</code> (Unity Entities) - Links to scene asset</li><li><code>SubSceneDataComponent</code> (ProStream) - Metadata and references</li></ul><p><strong>Properties:</strong></p><ul><li>Position: World position of QuadTree cell center</li><li>SceneAsset: Reference to .unity file</li><li>AutoLoadScene: Whether to load automatically</li></ul><h3 id="section-gameobject" tabindex="-1">Section GameObject <a class="header-anchor" href="#section-gameobject" aria-label="Permalink to &quot;Section GameObject&quot;">​</a></h3><p><strong>Components:</strong></p><ul><li><code>SubSceneSection</code> (ProStream) - Section metadata</li><li><code>SceneSectionAuthoring</code> (Unity Entities) - ECS conversion data</li></ul><p><strong>Properties:</strong></p><ul><li>SectionIndex: Unique identifier (0, 1, 2, etc.)</li><li>SectionName: Layer name (Ground, LargeObjects, etc.)</li><li>LoadDistance: Distance threshold for this section</li></ul><h2 id="asset-organization" tabindex="-1">Asset Organization <a class="header-anchor" href="#asset-organization" aria-label="Permalink to &quot;Asset Organization&quot;">​</a></h2><p>SubScene files are organized in a structured directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Assets/</span></span>
<span class="line"><span>└── SubScene_Assets/</span></span>
<span class="line"><span>    └── MyScene/</span></span>
<span class="line"><span>        └── Entity/</span></span>
<span class="line"><span>            ├── MyScene_Quad_0_0.unity</span></span>
<span class="line"><span>            ├── MyScene_Quad_0_1.unity</span></span>
<span class="line"><span>            ├── MyScene_Quad_1_0.unity</span></span>
<span class="line"><span>            └── ... (more SubScene files)</span></span></code></pre></div><h2 id="modification-execution-points" tabindex="-1">Modification Execution Points <a class="header-anchor" href="#modification-execution-points" aria-label="Permalink to &quot;Modification Execution Points&quot;">​</a></h2><p>Modifications can run at various stages during SubScene creation:</p><ol><li><strong>BeforeSubSceneCreation</strong> - Before any assets are created</li><li><strong>BeforeObjectCopy</strong> - Before cloning objects</li><li><strong>PerSection</strong> - After objects copied to each section (most common)</li><li><strong>BeforeMoveToSubScene</strong> - Before moving to SubScene file</li><li><strong>AfterMoveToSubScene</strong> - After in SubScene file</li><li><strong>BeforeCloseSubScenes</strong> - Before closing SubScene files</li><li><strong>AfterCloseSubScenes</strong> - After all closed</li></ol><p>See <a href="/editor-guide/engines/modification-engine.html">Modification Engine</a> for details.</p><h2 id="console-output" tabindex="-1">Console Output <a class="header-anchor" href="#console-output" aria-label="Permalink to &quot;Console Output&quot;">​</a></h2><p>During execution, you&#39;ll see progress in the Console:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[ProStream] Starting SubScene Creation</span></span>
<span class="line"><span>[ProStream] Creating 16 SubScene assets...</span></span>
<span class="line"><span>[ProStream] SubScene assets created</span></span>
<span class="line"><span>[ProStream] Opening SubScenes additively...</span></span>
<span class="line"><span>[ProStream] Processing SubScene: MyScene_Quad_0_0</span></span>
<span class="line"><span>  - Creating section hierarchies...</span></span>
<span class="line"><span>  - Cloning 23 objects...</span></span>
<span class="line"><span>  - Running modifications...</span></span>
<span class="line"><span>  - Moving to SubScene file...</span></span>
<span class="line"><span>[ProStream] Processing SubScene: MyScene_Quad_0_1</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>[ProStream] Closing SubScenes...</span></span>
<span class="line"><span>[ProStream] Reloading main scene...</span></span>
<span class="line"><span>[ProStream] Creating StreamingManager...</span></span>
<span class="line"><span>[ProStream] SubScene Creation Complete in 12.5s</span></span></code></pre></div><h2 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">​</a></h2><p><strong>SubScene files not created</strong></p><ul><li>Check Console for errors</li><li>Verify Position Calculation completed</li><li>Ensure write permissions in Assets folder</li><li>Check disk space</li></ul><p><strong>Objects not appearing in SubScenes</strong></p><ul><li>Verify objects were matched during Position Calculation</li><li>Check MatchTracker.IsMatched is true</li><li>Ensure objects are prefabs</li><li>Open SubScene files manually to inspect</li></ul><p><strong>Scene reload fails</strong></p><ul><li>Save scene before running process</li><li>Close other scenes first</li><li>Check for compilation errors</li><li>Try restarting Unity</li></ul><p><strong>StreamingManager not created</strong></p><ul><li>Check if already exists in scene</li><li>Verify SubScene creation completed</li><li>Look for errors in Console</li></ul><h2 id="performance-considerations" tabindex="-1">Performance Considerations <a class="header-anchor" href="#performance-considerations" aria-label="Permalink to &quot;Performance Considerations&quot;">​</a></h2><p><strong>Processing Time</strong></p><ul><li>More objects = longer processing</li><li>Complex modifications increase time</li><li>Large scenes may take several minutes</li></ul><p><strong>Memory Usage</strong></p><ul><li>All SubScenes are opened during processing</li><li>Large scenes may require significant memory</li><li>Close other applications if needed</li></ul><p><strong>Disk Space</strong></p><ul><li>Each SubScene is a separate file</li><li>Large scenes create many files</li><li>Ensure adequate disk space</li></ul><h2 id="after-completion" tabindex="-1">After Completion <a class="header-anchor" href="#after-completion" aria-label="Permalink to &quot;After Completion&quot;">​</a></h2><p>Once SubScene Creation completes successfully:</p><ol><li>SubScene files are created</li><li>Objects are organized into sections</li><li>StreamingManager is added to scene</li><li>Scene is ready for Play Mode testing</li></ol><h2 id="testing-in-play-mode" tabindex="-1">Testing in Play Mode <a class="header-anchor" href="#testing-in-play-mode" aria-label="Permalink to &quot;Testing in Play Mode&quot;">​</a></h2><ol><li>Enter Play Mode</li><li>Move camera/player around scene</li><li>Watch SubScenes load/unload in Hierarchy</li><li>Monitor performance in Profiler</li></ol><h2 id="rebuilding-subscenes" tabindex="-1">Rebuilding SubScenes <a class="header-anchor" href="#rebuilding-subscenes" aria-label="Permalink to &quot;Rebuilding SubScenes&quot;">​</a></h2><p>To rebuild SubScenes after changes:</p><ol><li>Delete existing SubScene files (optional)</li><li>Adjust configuration (rules, layers, etc.)</li><li>Re-run Calculate Positions</li><li>Re-run Create SubScenes</li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Creating SubScenes will overwrite existing SubScene files. Make backups if you&#39;ve made manual changes to SubScene files.</p></div><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="/processes/position-calculation.html">Position Calculation</a> - Previous step in workflow</li><li><a href="/runtime-systems/runtime-streaming.html">Runtime Streaming</a> - How streaming works at runtime</li><li><a href="/editor-guide/engines/modification-engine.html">Modification Engine</a> - Customize SubScene creation</li><li><a href="/getting-started/standard-workflow.html">Standard Workflow</a> - Complete guide</li></ul>`,74)])])}const S=n(o,[["render",t]]);export{h as __pageData,S as default};
